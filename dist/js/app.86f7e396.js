(function(t){function e(e){for(var i,a,l=e[0],r=e[1],c=e[2],f=0,m=[];f<l.length;f++)a=l[f],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(m.length)m.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var t,e=0;e<o.length;e++){for(var s=o[e],i=!0,l=1;l<s.length;l++){var r=s[l];0!==n[r]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={app:0},o=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/modular-scale-viewer/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;o.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"28d6":function(t,e,s){"use strict";s("d5f7")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("section",{staticClass:"section section-settings"},[s("div",{staticClass:"container"},[t._m(0),s("div",{staticClass:"row"},[s("Settings",{staticClass:"asd"})],1)])]),s("section",{staticClass:"section section-viewer"},[s("div",{staticClass:"container"},[t._m(1),s("div",{staticClass:"row"},[s("div",{staticClass:"mv_12"},[s("Scale",{staticClass:"asd"})],1)])])]),s("DocumentStyles",{staticClass:"asd"})],1)},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"mv_12"},[s("h2",[t._v("Settings")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"mv_12"},[s("h2",[t._v("Viewer")])])])}],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mv_12 settings"},[s("form",{staticClass:"row"},[s("div",{staticClass:"settings__item-outer mv_12 ds_2"},[s("div",{staticClass:"settings__item"},[s("div",{staticClass:"settings__item-field"},[s("label",{staticClass:"settings__item-label"},[t._v("Font base")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.fb,expression:"fb",modifiers:{number:!0}}],staticClass:"field-text",attrs:{type:"text"},domProps:{value:t.fb},on:{keyup:t.setSettings,input:function(e){e.target.composing||(t.fb=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])]),s("div",{staticClass:"settings__item-outer mv_12 ds_2"},[s("div",{staticClass:"settings__item"},[s("div",{staticClass:"settings__item-field"},[s("label",{staticClass:"settings__item-label"},[t._v("Ratio")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.ratio,expression:"ratio",modifiers:{number:!0}}],staticClass:"field-text",attrs:{type:"text"},domProps:{value:t.ratio},on:{keyup:t.setSettings,input:function(e){e.target.composing||(t.ratio=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])]),s("div",{staticClass:"settings__item-outer mv_12 ds_2"},[s("div",{staticClass:"settings__item"},[s("div",{staticClass:"settings__item-field settings__item-field--w--double"},[s("label",{staticClass:"settings__item-label"},[t._v("Color")]),s("div",t._g({staticClass:"field-text",class:{active:t.isColorpickerVisible},domProps:{textContent:t._s(t.colorHex)}},{click:t.toggleColorpicker,keyup:t.setSettings})),s("colorpicker",{directives:[{name:"show",rawName:"v-show",value:t.isColorpickerVisible,expression:"isColorpickerVisible"}],staticClass:"as",on:{input:t.changeColor},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"settings__item-outer mv_12 ds_2",staticStyle:{display:"none"}},[s("div",{staticClass:"settings__item"},[s("div",{staticClass:"settings__item-field"},[s("label",{staticClass:"settings__item-label"},[t._v("Font-family")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.fontFamily,expression:"fontFamily"}],staticClass:"select",attrs:{name:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.fontFamily=e.target.multiple?s:s[0]}}},t._l(t.fonts,(function(e){return s("option",{key:e.family,domProps:{value:e.family}},[t._v(" "+t._s(e.family)+" ")])})),0)])])]),s("div",{staticClass:"settings__item-outer mv_12 ds_2"},[s("div",{staticClass:"settings__item-field"},[s("label",{staticClass:"settings__item-label"},[t._v("Font-weight")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.fontWeight,expression:"fontWeight"}],staticClass:"select",attrs:{name:""},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.fontWeight=e.target.multiple?s:s[0]},t.setSettings]}},t._l(t.fontWeightsArr,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0)])]),s("div",{staticClass:"settings__item-outer mv_12 ds_2"},[s("BaseSelectWithSearch",{attrs:{items:t.fonts,initial_item_active:t.fontFamily,"__change-family":"[changeFamily, setSettings]"},on:{"change-family":t.changeFamily}})],1)])])},l=[],r=s("c345"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"asd"},[s("label",{staticClass:"settings__item-label"},[t._v("Font-family")]),s("div",{staticClass:"select"},[s("div",{staticClass:"select__title",on:{click:t.toggleList}},[t.isListOpen?t._e():s("span",[t._v(" "+t._s(t.activeValue)+" ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.isListOpen,expression:"isListOpen"}]},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inputText,expression:"inputText"}],staticClass:"field-text",attrs:{type:"text",id:"too",placeholder:"search font.."},domProps:{value:t.inputText},on:{input:[function(e){e.target.composing||(t.inputText=e.target.value)},t.onInput]}})])]),s("div",{staticClass:"select__lists-container"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.searchResult.length,expression:"searchResult.length"}],staticClass:"select__list select__list--search--results"},[t._m(0),t._l(t.searchResult,(function(e,i){return s("li",{key:e.family,staticClass:"select__list-item",on:{click:function(s){return t.setSearchedActiveOption(e,i)}}},[t._v(" "+t._s(e.family)+" ")])}))],2),t.previousSearchResult.length&&t.isListOpen?s("ul",{staticClass:"select__list select__list--search--results"},[t._m(1),t._l(t.previousSearchResult,(function(e,i){return s("li",{key:e.family,staticClass:"select__list-item",on:{click:function(s){return t.setPreviousSearchedActiveOption(e,i)}}},[t._v(" "+t._s(e.family)+" ")])}))],2):t._e(),s("ul",{directives:[{name:"show",rawName:"v-show",value:1==t.isListOpen,expression:"true == isListOpen"}],staticClass:"select__list"},[t._m(2),t._l(t.selectOptions,(function(e,i){return s("li",{key:e.family,staticClass:"select__list-item",on:{click:function(s){return t.setSelectActiveOption(e,i)}}},[t._v(" "+t._s(e.family)+" ")])}))],2)])])])},u=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"select__list-item select__list-item--title"},[s("em",[t._v("Search results:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"select__list-item select__list-item--title"},[s("em",[t._v("Yout Last Searched:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("li",{staticClass:"select__list-item select__list-item--title"},[s("em",[t._v("Most popular:")])])}],f={name:"BaseSelectWithSearch",props:{items:{type:[Array],default:function(){return[]}},initial_item_active:{type:String,default:"Roboto"}},data:function(){return{selectOptions:this.items,activeValue:this.initial_item_active,activeOption:0,isListOpen:!1,inputText:"",searchResult:[],previousSearchResult:[]}},computed:{},methods:{toggleList:function(t){this.isListOpen=!0,console.log(t.target);var e=t.target.closest(".select").querySelector("#too");e.focus(),console.log(e)},setSelectActiveOption:function(t,e){this.activeOption=e,console.log("Click on option"),console.log(t),this.activeValue=this.selectOptions[e].family,this.isListOpen=!1,this.giveValue(),this.resetSearchResults(),this.resetSearchField()},setSearchedActiveOption:function(t,e){this.activeOption=e,console.log("Click on option"),console.log(t),this.activeValue=this.searchResult[e].family,this.isListOpen=!1,this.giveValue(),this.resetSearchResults(),this.resetSearchField(),this.previousSearchResult.unshift(t),this.previousSearchResult.length>10&&this.previousSearchResult.pop()},setPreviousSearchedActiveOption:function(t,e){this.activeOption=e,console.log("Click on option"),console.log(t),this.activeValue=this.previousSearchResult[e].family,this.isListOpen=!1,this.giveValue(),this.resetSearchResults(),this.resetSearchField()},onInput:function(){var t=this;console.log("inputText:"),console.log(this.inputText);var e=this.inputText,s=this.searchResult;setTimeout((function(){return t.searchResult=t.getSearchResults(e)}),500),this.searchResult=s},getSearchResults:function(t){return this.$store.getters.getSearchResults(t)},resetSearchResults:function(){this.searchResult=[]},resetSearchField:function(){this.inputText=""},giveValue:function(){this.$emit("change-family",this.activeValue)}}},m=f,h=(s("b2d9"),s("2877")),_=Object(h["a"])(m,c,u,!1,null,"223f580a",null),p=_.exports,v={name:"Settings",components:{colorpicker:r["Photoshop"],BaseSelectWithSearch:p},data:function(){return{fb:16,ratio:1.14,color:"#353437",fontWeight:"400",fontFamily:"Roboto",isColorpickerVisible:0,googleWebFontsDeveloperAPI:"AIzaSyCpLnb8YrKmUVA26D8VGCE0vNBwLb5UpmY"}},created:function(){this.$store.dispatch("fetchFonts")},computed:{colorHex:function(){return"string"===typeof this.color?this.color:this.color.hex},fonts:function(){return this.$store.getters.getInitialFonts},fontWeightsArr:function(){return this.$store.getters.getFontWeightsArr}},methods:{setSettings:function(){this.$store.dispatch("setSettings",{fb:this.fb,ratio:this.ratio,colorHex:this.colorHex,fontWeight:this.fontWeight,fontFamily:this.fontFamily}),console.log("Settings - setSettings()")},toggleColorpicker:function(){this.isColorpickerVisible=!this.isColorpickerVisible},changeFamily:function(t){this.fontFamily=t,this.setSettings()},changeColor:function(){this.setSettings()}}},g=v,d=(s("28d6"),Object(h["a"])(g,a,l,!1,null,"7f47a00c",null)),y=d.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scale",attrs:{__style:"display:none;"}},t._l(t.fonts,(function(e,i){return s("ScaleItem",{key:e[t.id],staticClass:"asd",attrs:{item:e,item_index:i,styles:t.styles},on:{"change-name":t.updateFontNames}})})),1)},b=[],C=(s("b0c0"),s("b680"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"scale__item"},[s("div",{staticClass:"scale__item-name-outer"},[s("div",{staticClass:"scale__item-name"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.nameUI,expression:"nameUI"}],staticClass:"field-text",attrs:{type:"text"},domProps:{value:t.nameUI},on:{change:t.changeName,input:function(e){e.target.composing||(t.nameUI=e.target.value)}}})])]),s("div",{staticClass:"scale__item-value-outer"},[s("div",{staticClass:"scale__item-value"},[t._v(t._s(t.item["font_size"]))])]),s("div",{staticClass:"scale__item-line-height-outer"},[s("div",{staticClass:"scale__item-line-height",style:{fontSize:t.item["font_size"]+"px"}})]),s("div",{staticClass:"scale__item-text-outer",style:{fontSize:t.item["font_size"]+"px"}},[s("div",{staticClass:"text",style:t.styles},[t._v(' Lorem Ipsum - это текст-"рыба", часто используемый в печати и вэб-дизайне. Lorem Ipsum является стандартной ... ')])])])}),x=[],F=(s("a9e3"),{name:"ScaleItem",props:{item:{type:Object,default:function(){return{}}},styles:{type:Object},item_index:{type:Number}},data:function(){return{nameUI:this.item.name}},methods:{changeName:function(){this.$emit("change-name",this.item_index,this.nameUI),console.log("event - changeName")}}}),w=F,O=Object(h["a"])(w,C,x,!1,null,"50cf9e67",null),k=O.exports,N={name:"Scale",components:{ScaleItem:k},computed:{settings:function(){return this.$store.getters.getSettings},fb:function(){return this.settings.fb},ratio:function(){return this.settings.ratio},styles:function(){return{color:this.settings.color,fontWeight:this.settings.fontWeight,fontFamily:this.settings.fontFamily}},font_size_names:function(){return this.$store.getters.getFontSizeNames},fonts:function(){var t=[];t.push({}),t[0]["name"]=this.font_size_names[0],t[0]["font_size"]=this.fb,t[0]["id"]=12345;for(var e=1;e<this.font_size_names.length;e++)t.push({}),t[e]["name"]=this.font_size_names[e],t[e]["font_size"]=this.ratio*t[e-1]["font_size"],t[e]["font_size"]=t[e]["font_size"].toFixed(4),t[e]["id"]=12345+e;return t}},methods:{updateFontNames:function(t,e){this.$store.dispatch("updateFontNames",{item_index:t,nameUI:e})}}},W=N,R=Object(h["a"])(W,S,b,!1,null,"4fac16e9",null),A=R.exports,T=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("link",{attrs:{rel:"preconnect",href:"https://fonts.gstatic.com"}}),s("link",{attrs:{href:t.fontsURL,rel:"stylesheet"}})])},$=[],E=(s("a15b"),s("ac1f"),s("5319"),{name:"documentStyles",computed:{settings:function(){return this.$store.getters.getSettings},styles:function(){return{color:this.settings.color,fontWeight:this.settings.fontWeight,fontFamily:this.settings.fontFamily}},fontWeightsArr:function(){return this.$store.getters.getFontWeightsArr},fontWeightsString:function(){return this.fontWeightsArr.join(";")},fontFamilyString:function(){var t=this.styles.fontFamily;return t.replace(" ","+")},fontsURL:function(){return"https://fonts.googleapis.com/css2?family="+this.fontFamilyString+":wght@"+this.fontWeightsString+"&display=swap"}}}),L=E,I=Object(h["a"])(L,T,$,!1,null,"6278edd6",null),z=I.exports,j={name:"App",components:{Settings:y,Scale:A,DocumentStyles:z}},V=j,P=(s("5c0b"),Object(h["a"])(V,n,o,!1,null,null,null)),U=P.exports,D=(s("4de4"),s("caad"),s("2532"),s("fb6a"),s("2f62")),H=s("bc3a"),M=s.n(H),B=M.a.create({baseURL:"https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity&key=AIzaSyCpLnb8YrKmUVA26D8VGCE0vNBwLb5UpmY",timeout:2e3,headers:{Accept:"application/json","Content-Type":"application/json"}}),G={getFonts:function(){return B.get("")}};i["a"].use(D["a"]);var Y=new D["a"].Store({state:{fb:16,ratio:1.14,color:"#000000",fontWeight:"400",fontFamily:"Roboto",fonts:{},fontWeightsArr:["300","400","500","600","700"],fontSizeNames:["base","h6","h5","h4","h3","h2","h1"]},modules:{},mutations:{SET_SETTINGS:function(t,e){var s=e.fb,i=e.ratio,n=e.colorHex,o=e.fontWeight,a=e.fontFamily;t.fb=s,t.ratio=i,t.color=n,t.fontWeight=o,t.fontFamily=a},SET_FONTS:function(t,e){t.fonts=e.items},UPDATE_FONT_SIZE_NAMES:function(t,e){t.fontSizeNames=e}},actions:{setSettings:function(t,e){var s=t.commit,i=e.fb,n=e.ratio,o=e.colorHex,a=e.fontWeight,l=e.fontFamily;s("SET_SETTINGS",{fb:i,ratio:n,colorHex:o,fontWeight:a,fontFamily:l})},fetchFonts:function(t){var e=t.commit;G.getFonts().then((function(t){e("SET_FONTS",t.data),console.log("Fonts from GoogleFonts has been fetched:",t)})).catch((function(t){console.log("services.js: There was an error: "+t.message)}))},updateFontNames:function(t,e){var s=t.commit,n=t.state,o=e.item_index,a=e.nameUI,l=n.fontSizeNames;i["a"].set(l,o,a),s("UPDATE_FONT_SIZE_NAMES",l)}},getters:{getInitialFonts:function(t){for(var e=10,s=[],i=0;i<e;i++)s.push(t.fonts[i]);return s},getSearchResults:function(t){return function(e){var s=t.fonts,i=s.filter((function(t){return t.family.toLowerCase().includes(e.toLowerCase())})),n=i.slice(0,10);return n}},getSettings:function(t){return{fb:t.fb,ratio:t.ratio,color:t.color,fontWeight:t.fontWeight,fontFamily:t.fontFamily}},getFontSizeNames:function(t){return t.fontSizeNames},getFontWeightsArr:function(t){return t.fontWeightsArr}}});i["a"].config.productionTip=!1,new i["a"]({store:Y,render:function(t){return t(U)}}).$mount("#app")},"5c0b":function(t,e,s){"use strict";s("9c0c")},"94f8":function(t,e,s){},"9c0c":function(t,e,s){},b2d9:function(t,e,s){"use strict";s("94f8")},d5f7:function(t,e,s){}});
//# sourceMappingURL=app.86f7e396.js.map